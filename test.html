<!doctype html>
<html lang="fr">
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Test Agents</title></head>
<body style="font-family:Arial;background:#0b0f14;color:#e8eef9;padding:16px">
<button id="btn" style="min-height:44px;width:100%">Charger agents</button>
<pre id="out"></pre>

<script>
const API_EXEC = "COLLE_ICI_TON_URL_EXEC_APPS_SCRIPT"; // â€¦/exec

function jsonp(url){
  return new Promise((resolve,reject)=>{
    const cb="cb_"+Math.random().toString(36).slice(2);
    window[cb]=(data)=>{cleanup();resolve(data);};
    const s=document.createElement("script");
    s.onerror=()=>{cleanup();reject("load_error");};
    function cleanup(){delete window[cb];s.remove();}
    s.src = url + (url.includes("?")?"&":"?") + "callback=" + cb;
    document.head.appendChild(s);
  });
}

document.getElementById("btn").onclick = async ()=>{
  const out=document.getElementById("out");
  out.textContent="Chargement...";
  try{
    const res = await jsonp(API_EXEC + "?action=agents");
    out.textContent = JSON.stringify(res, null, 2);
  }catch(e){
    out.textContent = "ERREUR: " + e;
  }
};
</script>
</body>
</html>
